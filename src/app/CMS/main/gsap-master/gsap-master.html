<div class="grid">

  <div class="col-3 p-3 border-right">
    <h3>Pages</h3>
    <ul class="list-none">
      <li *ngFor="let p of pages" (click)="selectPage(p)"
          class="p-2 cursor-pointer hover:bg-gray-100">
        {{ p.title }}
      </li>
    </ul>
  </div>

  <div class="col-9 p-3" *ngIf="selectedPage">

    <h2>{{ selectedPage.title }}</h2>

    <button pButton label="Add Animation" icon="pi pi-plus" class="my-3"
            (click)="addAnimation()"></button>

    <!-- Page Animation Table -->
    <p-table [value]="selectedPage.animations">
      <ng-template pTemplate="header">
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Duration</th>
          <th>Preview</th>
          <th>Actions</th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-row>
        <tr>
          <td>{{ row.id }}</td>
          <td>{{ row.name }}</td>
          <td>{{ row.duration }}s</td>

          <!-- Live preview -->
          <td>
            <app-preview-grid [animation]="row"></app-preview-grid>
          </td>

          <td>
            <button pButton icon="pi pi-pencil" (click)="editAnimation(row)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <div class="text-right mt-3">
      <button pButton label="Save Page" icon="pi pi-save"
              (click)="savePageToServer()"></button>
    </div>
  </div>

</div>

<!-- Animation Editor Dialog -->
<p-dialog [(visible)]="showAnimationDialog" modal="modal" header="Animation Editor" [style]="{width: '40vw'}">

  <app-animation-editor
    *ngIf="editingAnimation"
    [config]="editingAnimation"
    (saveConfig)="onSaveAnimation($event)">
  </app-animation-editor>

</p-dialog>
